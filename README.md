# rx-template-dcsgovernment
Репозиторий с шаблоном разработки «Захват с электронной почты обращений и входящих писем для нескольких НОР».

Для работы данного шаблона необходимо установить решение для органов государственных власти и "Занесение документов через службу ввода".

## Описание
Шаблон позволяет создавать входящие письма и обращения в Directum RX с помощью службы ввода. 

Создание документов с электронной почты:
1. Для всей инсталляции заведены два служебных электронных ящика для захвата писем – для обращений и для входящих писем. Письма на них пересылаются вручную с официальных ящиков наших организаций. При создании документа в системе корреспондент определяется по исходному адресу электронной почты отправителя, наша организация – по адресу, с которого переслано письмо на служебный ящик для захвата.
2. Основной документ создается из тела письма, вложения создаются в Directum RX как приложения.

Добавлена возможность отправки документа после создания задачей на регистрацию.
Регистратор входящего письма определяется стандартным механизмом Directum RX (ответственный в группе регистрации, подходящей по критериям документа), регистраторы для обращений берутся из справочника Настройки наших организаций модуля «Обращения граждан». Если регистраторов несколько, после выполнения одного из заданий пользователем, автоматически выполняются все остальные.
Схема задачи на регистрацию может быть отредактирована в проводнике.
> [!NOTE]
> Замечания и пожеланию по развитию шаблона разработки фиксируйте через [Issues](https://github.com/DirectumCompany/rx-template-counterpartiescleaning/issues).
При оформлении ошибки, опишите сценарий для воспроизведения. Для пожеланий приведите обоснование для описываемых изменений - частоту использования, бизнес-ценность, риски и/или эффект от реализации.
> 
> Внимание! Изменения будут вноситься только в новые версии.

## Порядок установки
Для работы требуется:
1. Установленный Directum RX версии 4.6 и выше.
2. Установленное решение "Обращения граждан".
3. Установленное решение «Занесение документов через службу ввода».

### Установка для ознакомления
1. Склонировать репозиторий https://github.com/DirectumCompany/rx-template-dcsgovernment.git в папку.
2. Указать в _ConfigSettings.xml DDS:
```xml
<block name="REPOSITORIES">
  <repository folderName="Base" solutionType="Base" url="" /> 
  <repository folderName="<Папка из п.1>" solutionType="Work" 
     url="https://github.com/DirectumCompany/rx-template-dcsgovernment.git" />
</block>
```
### Установка для использования на проекте

Возможные варианты:

#### A. Fork репозитория.
1. Сделать fork репозитория rx-template-dcsgovernment для своей учетной записи.
2. Склонировать созданный в п. 1 репозиторий в папку.
3. Указать в _ConfigSettings.xml DDS:
``` xml
<block name="REPOSITORIES">
  <repository folderName="Base" solutionType="Base" url="" /> 
  <repository folderName="<Папка из п.2>" solutionType="Work" 
     url="<Адрес репозитория gitHub учетной записи пользователя из п. 1>" />
</block>
```
#### B. Подключение на базовый слой.
Вариант не рекомендуется, так как при выходе версии шаблона разработки не гарантируется обратная совместимость.
1. Склонировать репозиторий https://github.com/DirectumCompany/rx-template-dcsgovernment.git в папку.
2. Указать в _ConfigSettings.xml DDS:
```xml
<block name="REPOSITORIES">
  <repository folderName="Base" solutionType="Base" url="" /> 
  <repository folderName="<Папка из п.1>" solutionType="Base" 
     url="https://github.com/DirectumCompany/rx-template-dcsgovernment.git" />
  <repository folderName="<Папка для рабочего слоя>" solutionType="Work" 
     url="<Адрес репозитория для рабочего слоя>" />
</block>
```

#### C. Копирование репозитория в систему контроля версий.
Рекомендуемый вариант для проектов внедрения.
1. В системе контроля версий с поддержкой git создать новый репозиторий.
2. Склонировать репозиторий https://github.com/DirectumCompany/rx-template-dcsgovernment.git в папку с ключом --mirror.
3. Перейти в папку из п. 2.
4. Импортировать клонированный репозиторий в систему контроля версий командой:
git push –mirror <Адрес репозитория из п. 1>
